<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	template="/WEB-INF/template/ui.xhtml">

	<ui:define name="content">
		<h:outputScript target="head">
			ga('send', 'pageview');
		</h:outputScript>
		
		<div class="content-band">
			<div class="container">

				<div class="row">
					<div class="col-md-8 col-md-offset-2">
						<h3>#{m['core.resetPassword']}</h3>
		
						<ui:fragment rendered="#{resetPasswordCtrl.resetPasswordInitMode}">
							<div class="row plain-form-wrapper">
								<div class="col-md-8">
									<h:form id="resetPasswordInitForm" class="plain-form">
										<div class="form-group row">
											<label for="email" class="col-md-5 required control-label">#{m['core.email']}</label>
											<div class="col-md-7">
												<h:inputText id="email" value="#{resetPasswordCtrl.email}" class="form-control"
													required="true" requiredMessage="#{m['error.email.required']}"
													binding="#{resetPasswordCtrl.emailUIInput}">
												</h:inputText>
												<h:message for="email" errorClass="message-error" />
											</div>
										</div>
										<div class="form-group row">
											<div class="col-md-7 col-md-offset-5">
												<h:commandButton class="btn btn-primary form-control"
													action="#{resetPasswordCtrl.resetPasswordInit}" value="#{m['core.resetPassword.sendCode']}" />
											</div>
										</div>
									</h:form>
								</div>
							</div>
						</ui:fragment>
		
						<ui:fragment rendered="#{resetPasswordCtrl.resetPasswordMode}">
							<div class="row plain-form-wrapper">
								<div class="col-md-8">
									<h:form id="resetPasswordForm" class="plain-form">
										<div class="form-group row">
											<label for="password" class="col-md-5 required control-label">#{m['core.password']}</label>
											<div class="col-md-7">
												<h:inputSecret id="password" value="#{resetPasswordCtrl.password}" class="form-control"
													required="true" requiredMessage="#{m['error.password.required']}"
													validatorMessage="#{m['error.password.invalid']}"
													binding="#{resetPasswordCtrl.passwordUIInput}" title="#{m['core.password.hint']}">
													<f:validateRegex pattern="#{resetPasswordCtrl.passwordPattern}" />
												</h:inputSecret>
												<h:message for="password" errorClass="message-error" />
											</div>
										</div>
										<div class="form-group row">
											<label for="passwordConfirm" class="col-md-5 required control-label">#{m['core.passwordRepeat']}</label>
											<div class="col-md-7">
												<h:inputSecret id="passwordConfirm" value="#{resetPasswordCtrl.passwordConfirm}"
													class="form-control" required="true" requiredMessage="#{m['error.password.required']}"
													validatorMessage="#{m['error.password.invalid']}"
													binding="#{resetPasswordCtrl.passwordConfirmUIInput}" title="#{m['core.password.hint']}">
													<f:validateRegex pattern="#{resetPasswordCtrl.passwordPattern}" />
												</h:inputSecret>
												<h:message for="passwordConfirm" errorClass="message-error" />
											</div>
										</div>
										<div class="form-group row">
											<div class="col-md-7 col-md-offset-5">
												<h:commandButton class="btn btn-primary form-control"
													action="#{resetPasswordCtrl.resetPassword}" value="#{m['core.resetPassword']}" />
											</div>
										</div>
									</h:form>
								</div>
							</div>
						</ui:fragment>
		
					</div>
				</div>
				
			</div>
		</div>
		
		<h:outputScript>
		$(document).ready(function() {
			$('#resetPasswordForm\\:email').focus();
			$('#resetPasswordInitForm\\:email').focus();
			$('input:not(:hidden):not(:submit)[title]').tooltip({placement: 'right', container: 'body'});
		});
		</h:outputScript>
	</ui:define>

</ui:composition>